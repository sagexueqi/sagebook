# 消息丢失与幂等

## 消息丢失

消息的的处理一般分为三个阶段：`生产、存储、消费`；每个阶段在处理消息防丢失的时候，都有不同的处理策略。

![消息丢失_1](./imgs/消息丢失_1.png)

### 生产阶段

生产者保证消息不丢失是所有方案的基础，如果生产者消息都没有发出去，那后续的流程也就不存在。一般来说，生产阶段防止消息丢失的方案主要从两个思路出发：持久化和消息生产者客户端配置

#### 消息持久化方案

### 存储阶段

### 消费阶段

----

## 消息幂等

或 重复消费、消息一致性问题