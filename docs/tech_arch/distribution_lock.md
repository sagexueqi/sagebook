# 分布式锁

## 介绍

### 应用场景

我们可能只有允许一个事务或这客户端对特定的资源进行操作。在单机系统中，我们可以通过共享内存、信号量等机制保证线程和并发处理的安全。而在分布式系统中，我们很少会使用共享内存的机制，这也就导致了无法使用单机模式下的加锁机制。但是，我们可以利用单机模式下的加锁理论，基于共享存储或者中心节点，完成资源的锁定。

分布式锁和高性能时两个冲突的概念，既然加锁就一定是牺牲了资源修改的并发能力，降低并发能力，就一定会对系统性能有影响；我们的目标是，在对系统性能影响最小的情况下，保证锁的可用以及保证数据的安全。

例如：

- 产品、商品、文档信息更新，基于分布式锁锁住资源，避免数据被破坏
- 订单支付，只有一个客户端支付订单
- 文件更新

### 需要解决的问题

- 可重入性
- 高可用性
- 避免死锁
- 锁失效时的数据安全

----

## 实现方案

### 基于Redis原生指令

### 基于Redisson组件实现

### 基于Zookeeper

----
## 思考

### 基于WatchDog续租的机制是否一定可靠？